<html>
<body>
    <p>aoc16.8</p>
    <canvas id="Canvas1" width="900" height="900" style="border: 1px solid black;">
<script>
var c1 = document.getElementById("Canvas1");
var ct1 = c1.getContext("2d");

var ins=[
"\..\.|.........|..|................................................................./.-............./-....../.",
"............../..--.../...................-....|.......................\../...|..-....\...-|...-...........\..",
".......\......................................|..-\.................-..-......................................",
".......\......................................|..-\.................-..-......................................",
"........\..............|......................\........./..............................|..............||......",
".........|........|......-...........|....../....-.../.....|/.........-..../.../..........................|...",
"..\............................./\............................................................................",
"........|....................\............................./.....|\|..-....../............/..-..........\.....",
"...\.........................\.............|.........../..............-..../.............../-.................",
".||....../..............\.|...............-......................|-..-......../.|.............................",
"...|.|.....-...../.............-............./............\.\/........|.............................\|.-..\.-.",
"............./....................|.......|.....\..\..............................-.../....|..................",
"./......./.|...............\................................................||................................",
"......\......|.................|........../......|\|.......-|..................|.....-.-.||../.\..............",
"................../...............|.....\........-...-.\...||..\...........\............|.........|...........",
"...-........|\|........././/............|...........\.../\...|.......-........\....................-..........",
"..../...........\.........................../......-.|...................................../..\........|......",
"\...............\/......./........-..............|..............--........../....|..-.\...........-........./.",
"..........\........\|.........|\.........../........................../.........|............\..........|.....",
"...........\....|/.|..........-..............-....-|...\..........-.../............./.........................",
"..\..\......../...\\....................../...../.........................|.....\..............|..\...-.......",
"...........................-./...................................-/.\.....\...................\.../...........",
"..-..................|..................-...\.......|../............./|-............/........|.......|..-.....",
"...........-......................-.................|............../.......-./..........|....../..............",
".........|.............././...............|..../..............|.........|.....|..\......................|.....",
"......./-/...................\\..\......|........................\...\....../.....................|...-.......",
".....|.......................|............|...|........|...........-....../..................-...-............",
".../................../......|...........................-............|.............-........./............|..",
".-.........|.............|-...../..............................\................|........................../..",
".........../.........-.......|..-.........................-...............-...-.../...................../.....",
"../.......-../....................-...\...\........................-.............-...\...../.|.........../....",
"............-...............|........................................../...\.|....|........-.....\|...........",
".....................|\............................-..-....../..-|..../..................\................\...",
".\.................-......\...|............................./......./.........-............../................",
".\.........././............../|......\/..............\........................|........................|...-..",
".............../.........|.................................-.......\\.\-..........-......................./-..",
"-.|......................|.............|............................/....................|...........-........",
"../.....-.......|.....-.....\.../\........|.............|.........\./..//\................|.........-.....||..",
".\..\.......|......./............\..\.........../........-.../.|..............-..../....\.........../.\.\.....",
".............|..........|.........|.|...\-......................-..............|.../............./.........|..",
"....|................................................../...........-......-/......................-.....-.....",
"............................./.........-............................./..................\..........\..../.....",
".....|.....................-.........../.......|..................-.......\...|\...|......\.....\...|.........",
"........|............../..../|.|......-................|...../..........|................|...................-",
"....../.....//..........\.-|......|.....|..................../..............|.................................",
"\.-...-....\..................\....................|............||............................../.............",
"............................-|...-...........-.../......-.........\..-...|.|\..........-...............\.|//./",
"....../......././.|...................|\........../.\.../-...\..........\.-..|\../...........\....\..|.....\..",
"...............\.../..../.................\.......-...........\..|..................\\................./.\....",
"............-..........-......................|.......|..|....................-......|......\...........|.....",
"...............\......|.-............./............\.../.............-|........./...............\|\.....|.....",
".\...............|.................|...........\......\................\............\.|...\......./...........",
"\...|..............-..........|...................|....-.....\......../..........................\........|..|",
".........|........./.........|....-........-...................../|./.--.......\........................-..../",
"..........................-.....-...............-/............................--...../........................",
".....................-.\../\..........|.....................\.......\.../..........|.............\............",
"......................../..\.......\...............................................\./........................",
"....|......\..|\.-........../......................\|........\...............\.................|..............",
"............................./.....|..|............-...\.........-...\....|......\.............-..|...........",
"..................-......-.....................-...........-......\...-|-.-................\............|/....",
"...|....../............../..\.......................-....\...|.....\..|..\......./.................-.....-....",
".........-........|........../..-................................./....-.................-....................",
".............................-.......\...............\.....|......-....-.../.................\................",
"...../......|...................|..............-........./.............\...\....|.............\.......|.......",
".......|............./........./......\..../........|...........\................................-............",
"/...|././.......|-.|..........|................................/\.\.......-......-........-........\..........",
"../................./|.-...\........................|........|........|...\|.\........................./.....-",
"................-.........../|..............|.|/...|\...........-.......................-..|../...............",
"./..||........|....../........................|.................................../..............\..|./-......",
"/..-...../......................................\-...........-..................\|................../.........",
".............|.-......................|................-../.................-............../..............-...",  
"-.....-|-...............\..........-...........\.......\........................\.........../..../...../......",

'.-..................../..........|.--.............................-..-....|.\................|....|...\......\\',
   
"......./.-........................................\....|........|...../...........|...\|..-...................",
"\...............|........|.......\|..-..|...-..|-........|........./.\........................................",
"/.|./....|....-...../\..|...............................-.../........./.............-|.........-..../.-..\....",
"../......./...../..|........|../.....\....\.............-.-.................-...\.......|.\...........\.......",
"...-........./.............../..................\.|................/..//..................|.......-..\......-.",
"./.............../.-..\..........|.............-....................-....-..|...........-.....................",
"...........|-..|........................................./\............./-.../.................\........\.....",
"................................/...........................\.....................|.|.........................",
".........|............\........................................-...../..........|........../.../......\...\...",
"../.........|......./..................|........\.../.\.-...-......../../\......../................../........",
".-........./.........|....|.|.............................................|.\............/../.................",
"./.........................................\....../................../.--.....-..../.....|./.-......|.......\.",
".\..................../.-........|.........\............\...........\...............|-../................\....",
"........................|......./.-....-....\.|...................-......-..........|........\.........../...|",
".............-......./.../......................\.......\............/......................................|.",
"............-..........................-..................-.......\--......-.....-.......|..\..-....|........\\",
"...............|.......\......|....................\.....................-.../.|......|................../....",
"---..\-.../.........//....\../....|........\....|-.........-.....|..........-|..............|...../..........|",
"......-.............................-.........................-.........../...../.|.../................-.....|",
".........-.........\..............|....\..............-......\......../......\.......-\........-.............\\",
".................../......................|......|.....\..........................-..-......./....-.....-.....",
"...\.....................-..-....\.......././....\......./...........................\..............\\........",
".................|................./.....................\...../.\.................\.........|...|....|.......",
"./............-........................\..|...-............................./............./..\................",
"-............-..............|.................-..............................-..............................\.",
"................................/.....\........|....-.....||............/.|.............-..|....|....-........",
"/.........|............-./...|././..............\./-............/......../\.\..././../..\..\..............-...",
"..../.....................\.........|......-...........|...\/..........//\.......//....-...|/.....\..\........",
"../............................/...././...-....-............./.|..\..............|...../.........-.....\....|.",
".................................\..../...-.....-.....-....|..\.\...../....../.............../.\..............",
"..................|..|.......-......\.../....../....................................................|.......-.",
"-./.....|...\.....\../.......\..........................\.....|.............|...................|.\.../.../\..",
"..................-.....\.............|...|.........-..-............................../............/..|.......",
".....................\..../.....|......................................\.\............|/....................\.",
".....-..\.........-....\..............-..........................\.....\....................\.........\.....-.",
"\...\|\...../.\............................\........-.........................../.......-............\........",
".............................................-......\.............|..../.......|......../.....................",
"/.........-............./......|................-........-.............|...-..../.....\.\....\................"
]
var dir=0,m=0
var okRL=[".","-"], okUD=[".","|"]
    
display()
var n={x:0,y:0}

move(0,-1,0)
function move(d,a,b){ 
    if( a<-1 || a>=ins[0].length || b<0 || b>=ins.length){return}
    if(a>=0  || m==0) {show(a,b)} else{alert("a="+a+"  m="+m);return}
    m++
    if (m>300){ if(m%10==1){alert(m)}; return }
    if(d==0){
        n.x=a+1,n.y=b
        if( okRL.includes(ins[n.y].charAt(n.x)) ){ move(0,n.x,n.y); return}
        else{
         if(ins[n.y].charAt(n.x)=="/"){ move(3,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="\\"){ move(1,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="|"){ move(1,n.x,n.y);
                                    move(3,n.x,n.y); return}
        }
    }
    
     if(d==1){
         n.x=a,n.y=b+1
        if( okUD.includes(ins[n.y].charAt(n.x)) ){ move(1,n.x,n.y); return}
        else{
         if(ins[n.y].charAt(n.x)=="/"){ move(2,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="\\"){ move(0,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="-"){ move(0,n.x,n.y);
                                        move(2,n.x,n.y); return}
        } 
    }
    
     if(d==2){
        n.x=a-1,n.y=b
        if( okRL.includes(ins[n.y].charAt(n.x)) ){ move(2,n.x,n.y); return}
        else{
         if(ins[n.y].charAt(n.x)=="/"){ move(1,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="\\"){ move(3,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="|"){ move(1,n.x,n.y);
                                        move(3,n.x,n.y); return}
        }
    }
    
    if(d==3){
        n.x=a,n.y=b-1
        if( okUD.includes(ins[n.y].charAt(n.x)) ){ move(3,n.x,n.y); return}
        else{
         if(ins[n.y].charAt(n.x)=="/"){ move(0,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="\\"){ move(2,n.x,n.y); return}
         if(ins[n.y].charAt(n.x)=="-"){ move(0,n.x,n.y);
                                        move(2,n.x,n.y); return}
        }
    }
    
  

}

function show(p,q){    
ct1.fillText("*",8*p,15+8*q)
}
  
function display(){
   ct1.clearRect(0,20,800,800)
    for(k=0;k<ins.length;k++){
        for(j=0;j<ins[k].length;j++){
       ct1.fillText(ins[k].charAt(j), 10+8*j, 15+8*k)
      }
    }
}


 
</script>
</body>
</html>

